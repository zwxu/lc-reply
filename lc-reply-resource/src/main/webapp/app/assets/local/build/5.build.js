webpackJsonp([5,6],{27:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var n=a(14),c=o(n);t.exports={data:function(){return{loading:!0,layer:{show:!1,type:""},recv_query:{},query:{},queryResult:{},showLayer:!1,type:"change",accountInfo:{},account:{},accountList:{}}},events:{jump:function(t){console.log("--------jump--------------");var e=this.query;e.start=t,this.doQuery(e)}},methods:{add:function(){var t=this,e=t.accountInfo;if(!e.loginname||!e.password||!e.rid)return void alert("信息不全！");var a=$ApiConf.remote_addr+$ApiConf.api_account_add;console.log("url: "+a),t.$am.ajax({type:"post",dataType:"json",url:a,data:e,success:function(t){t.success?alert("修改完成！"+t.html):alert("修改失败！"+t.html),location.reload()}})},change:function(){var t=this,e=$ApiConf.remote_addr+$ApiConf.api_account_edit;t.accountInfo.id=t.account.id,console.log("url: "+e),t.$am.ajax({type:"post",cache:!1,dataType:"json",url:e,data:t.accountInfo,success:function(t){t.success?alert("修改完成！"+t.html):alert("修改失败！"+t.html),location.reload()}})},closeShowLayer:function(){this.showLayer=!1},deleteAccount:function(t){var e=confirm("确定删除吗?");if(1==e){var a=$ApiConf.remote_addr+$ApiConf.api_account_delete;console.log("url: "+a),this.$am.ajax({type:"post",cache:!1,url:a,dataType:"json",data:{id:t},success:function(t){t.success?(alert("删除成功"),location.reload()):alert("<strong>操作失败！"+t.html+"</strong>")}})}},restore:function(t){var e=$ApiConf.remote_addr+$ApiConf.api_account_restore;console.log("url: "+e),this.$am.ajax({type:"post",cache:!1,url:e,dataType:"json",data:{id:id},success:function(t){t.success?(alert("恢复成功"),location.reload()):alert("<strong>操作失败！"+t.html+"</strong>")}})},changeAccount:function(t){var e=this;this.type="change";var a=new c["default"](function(a,o){var n=$ApiConf.remote_addr+$ApiConf.api_account_queryById;console.log("url: "+n),e.$am.ajax({url:n,data:{id:t},success:function(t){a(t)},error:function(t,e,a){o(e)}})});a.then(function(t){e.account=t,e.showLayer=!0})["catch"](function(t){console.log("------------------"+t)})},addAccount:function(){this.role={},this.accountInfo={},console.log("addRole"),this.type="add",this.showLayer=!0},doQuery:function(t){console.log("doQuery!");var e=this,a=new c["default"](function(a,o){var n=$ApiConf.remote_addr+$ApiConf.api_account_list;console.log("url: "+n),e.$am.ajax({url:n,data:t,success:function(t){a(t)},error:function(t,e,a){o(e)}})});a.then(function(t){e.afterQuery(t)})["catch"](function(t){console.log("------------------"+t),e.loading=!1})},afterQuery:function(t){console.log("afterQuery"),this.queryResult=t,this.recv_query=t.query}},route:{activate:function(t){var e=this;e.doQuery(e.query),document.title=e.$route.menuName+"-小米金融",e.$am.isLogin()||(window.location.href="/#!/login"),t.next()}},components:{}}},77:function(t,e){t.exports='<div> <div class=g-cnt> <template v-if="queryResult.result && queryResult.result.length>0"> <table class=u-table2> <tr> <th>登录名</th> <th>登录密码</th> <th>用户身份</th> </tr> <tbody> <template v-for="item in queryResult.result"> <tr> <td>{{item.loginname}}</td> <td>{{item.password}}</td> <template v-if="item.rid == 1"> <td>管理员</td> </template> <template v-if="item.rid == 2"> <td>答辩老师</td> </template> <template v-if="item.rid == 3"> <td>答辩学生</td> </template> <td> <li> <template v-if="item.rid != 3"> <a id=change @click=changeAccount(item.id)>修改</a> <a id=delete @click=deleteAccount(item.id)>删除</a> </template> <template v-if="item.rid != 3 && item.deleteFlag == 0"> <a id=restore @click=restore(item.id)>恢复信息</a> </template> </li> </td> </tr> </template> </tbody> </table> <pagination :query.sync=recv_query></pagination> </template> <div v-else class=u-msg> <em class=icn-info>i</em> <span>暂无数据</span> </div> <table class=u-table> <tr> <td></td> </tr> <tr> <td> <input type=button class="u-btn u-btn-small" value=添加用户 @click=addAccount /> </td> </tr> </table> </div> <template v-if=showLayer> <div class=u-layer> <div class=u-close><em class=icn-close @click=closeShowLayer>X</em></div> <div class=pull-right> <table class=u-table2> <tr> <th>登录名:</th> <td><input id=roleCode v-model=accountInfo.loginname value={{account.loginname}}></td> </tr> <tr> <th>登录密码:</th> <td><input id=roleName v-model=accountInfo.password value={{account.password}}></td> </tr> <tr> <th>用户身份:</th> <td> <select v-model=accountInfo.rid class=searchType id=searchType> <template v-if="account.rid "> <option value={{account.rid}} selected=selected> <template v-if="account.rid == 1"> <td>管理员</td> </template> <template v-if="account.rid == 2"> <td>答辩老师</td> </template> <template v-if="account.rid == 3"> <td>答辩学生</td> </template> </option> </template> <template v-else> <option value=3 selected=selected>答辩学生</option> <option value=2>答辩老师</option> <option value=1>管理员</option> </template> </select> </td> </tr> <tr> <th>操作:</th> <td> <template v-if="type==\'change\'"> <input type=button class="u-btn u-btn-small" @click=change value=修改 /> </template> <template v-if="type==\'add\'"> <input type=button class="u-btn u-btn-small" @click=add value=添加 /> </template> </td> </tr> </table> </div> </div> <div class=u-mask id=loading2></div> </template> </div>'},88:function(t,e,a){var o,n;o=a(27),n=a(77),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options:t.exports).template=n)}});